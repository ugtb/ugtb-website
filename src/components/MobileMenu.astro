---
import type { HTMLAttributes } from 'astro/types';
import { nanoid } from 'nanoid';
import { navLinks } from '~/constants';
import Container from './common/Container.astro';
import Icon from './common/Icon';

type Props = HTMLAttributes<'div'>;

const props = Astro.props;
const currentUrl = Astro.url.pathname;
const id = nanoid();
---

<div {...props}>
  <input id={id} class="peer hidden" type="checkbox" />
  <label
    class="relative z-20 block h-8 w-8 cursor-pointer select-none before:absolute before:inset-x-0 before:top-1/2 before:block before:h-0.5 before:translate-y-1 before:bg-current before:transition-transform after:absolute after:inset-x-0 after:top-1/2 after:block after:h-0.5 after:-translate-y-1 after:bg-current after:transition-transform peer-checked:before:translate-y-0 peer-checked:before:rotate-45 peer-checked:after:translate-y-0 peer-checked:after:-rotate-45"
    for={id}
  >
    <span class="sr-only">Toggle navigation menu</span>
  </label>

  <nav
    class="fixed inset-x-0 inset-y-0 flex min-h-screen -translate-x-full flex-col bg-neutral-dark pb-16 pt-32 opacity-0 transition peer-checked:translate-x-0 peer-checked:opacity-100 sm:pb-24 sm:pt-48"
  >
    <Container left="sm" right="sm">
      <ul>
        {
          navLinks.map(({ text, href }) => (
            <li>
              <a class="group flex items-center gap-8 py-1" href={href}>
                {href === currentUrl && (
                  <span class="text-brand">
                    <Icon name="right-arrow" size={40} />
                  </span>
                )}
                <span
                  class:list={[
                    'text-H3-mobile sm:text-H3-desktop',
                    href === currentUrl
                      ? 'text-white'
                      : 'text-neutral transition group-hover:text-white group-hover:translate-x-[72px]',
                  ]}
                >
                  {text}
                </span>
              </a>
            </li>
          ))
        }
      </ul>
    </Container>
  </nav>
</div>
